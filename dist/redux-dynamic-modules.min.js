!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("redux"),require("prop-types"),require("react"),require("react-redux")):"function"==typeof define&&define.amd?define(["redux","prop-types","react","react-redux"],r):"object"==typeof exports?exports["redux-dynamic-modules"]=r(require("redux"),require("prop-types"),require("react"),require("react-redux")):e["redux-dynamic-modules"]=r(e.redux,e["prop-types"],e.react,e["react-redux"])}(window,function(e,r,t,n){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=2)}([function(r,t){r.exports=e},function(e,r,t){"use strict";r.__esModule=!0,r.getObjectRefCounter=function(e){e||(e=function(e,r){return e===r});var r=[],t=[];return{getCount:function(n){if(void 0===n||null===n)return 0;var o=r.findIndex(function(r){return r&&e(r,n)});return-1===o?0:t[o]},add:function(n){if(void 0!==n&&null!==n){var o=r.findIndex(function(r){return r&&e(r,n)}),u=1;-1===o?(o=r.length,r.push(n)):u=t[o]+1,t[o]=u}},remove:function(n){var o=r.findIndex(function(r){return r&&e(r,n)});return-1!==o&&(1===t[o]?(delete r[o],delete t[o],!0):(t[o]=t[o]-1,!1))}}},r.getStringRefCounter=function(){var e={};return{getCount:function(r){return void 0===r||null===r?0:e[r]||0},add:function(r){void 0!==r&&null!==r&&(e[r]?e[r]++:e[r]=1)},remove:function(r){return void 0!==r&&null!==r&&!!e[r]&&(1===e[r]?(delete e[r],!0):(e[r]--,!1))}}}},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}r.__esModule=!0,n(t(4)),n(t(8)),n(t(12)),n(t(1)),n(t(13)),n(t(3))},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};r.__esModule=!0;var o=t(1);r.getRefCountedManager=function(e,r){var t=o.getObjectRefCounter(r);e.getItems().forEach(function(e){return t.add(e)});var u=n({},e);return u.add=function(r){if(r){var n=r.filter(function(e){return e}),o=n.filter(function(e){return 0===t.getCount(e)});e.add(o),n.forEach(t.add)}},u.remove=function(r){r&&r.forEach(function(r){r&&(t.remove(r),0===t.getCount(r)&&e.remove([r]))})},u.dispose=function(){e.dispose()},u}},function(e,r,t){"use strict";var n=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();r.__esModule=!0;var o=t(5),u=t(6),i=t(7),d=function(e){function r(r,t){return e.call(this,r,t)||this}return n(r,e),r.prototype.render=function(){var e=this;return i.ReactReduxContext?u.createElement(i.ReactReduxContext.Consumer,null,function(r){return u.createElement(a,{createStore:e.props.createStore,store:r?r.store:void 0,modules:e.props.modules},e.props.children)}):u.createElement(a,{createStore:this.props.createStore,store:this.context.store,modules:this.props.modules},this.props.children)},r.contextTypes={store:o.object},r}(u.Component);r.DynamicModuleLoader=d;var a=function(e){function r(r){var t=e.call(this,r)||this;t._providerInitializationNeeded=!1,t._renderWithReactReduxContext=function(){var e=t.props.store;return u.createElement(i.ReactReduxContext.Provider,{value:{store:e,storeState:e.getState()}},t._renderChildren())},t._renderChildren=function(){return t.props.children&&"function"==typeof t.props.children?t.props.children():t.props.children};var n=r.createStore,o=r.modules,d=r.store;if(t._store=d,!t._store){if(!n)throw new Error("Store could not be resolved from React context");t._store=n(),t._providerInitializationNeeded=!0}return t._addedModules=t._store.addModules(o),t}return n(r,e),r.prototype.render=function(){return this._providerInitializationNeeded?u.createElement(i.Provider,{store:this._store},this._renderChildren()):this._renderWithReactReduxContext()},r.prototype.componentWillUnmount=function(){this._addedModules&&(this._addedModules.remove(),this._addedModules=void 0)},r}(u.Component)},function(e,t){e.exports=r},function(e,r){e.exports=t},function(e,r){e.exports=n},function(e,r,t){"use strict";r.__esModule=!0;var n=t(0),o=t(2),u=t(9),i=t(3),d=t(11);r.createStore=function(e,r,t,a){for(var c=[],f=4;f<arguments.length;f++)c[f-4]=arguments[f];t||(t=[]);var s=t.reduce(function(e,r){return r.middleware&&e.push.apply(e,r.middleware),e},[]),l=i.getRefCountedManager(o.getMiddlewareManager(),function(e,r){return e===r}),p=a.apply(void 0,r.concat([n.applyMiddleware.apply(void 0,s.concat([l.enhancer]))])),v=i.getRefCountedManager(u.getModuleManager(l,t),function(e,r){return e.id===r.id}),h=n.createStore(v.getReducer,e,p);v.setDispatch(h.dispatch);var M=function(e){var r=d.flatten(e);return v.add(r),{remove:function(){v.remove(r)}}},g=function(e){return M([e])};return t.forEach(function(e){e.onModuleManagerCreated&&e.onModuleManagerCreated({addModule:g,addModules:M})}),h.addModule=g,h.addModules=M,h.dispose=function(){v.dispose(),l.dispose(),t.forEach(function(e){e.dispose&&e.dispose()})},h.addModules(c),h}},function(e,r,t){"use strict";r.__esModule=!0;var n=t(10);r.getModuleManager=function(e,r){var t,o=null,u=[],i=new Set,d=function(e){if(e){if(!o)throw new Error("setDispatch should be called on ModuleManager before adding any modules.");e.forEach(o)}},a={getReducer:function(e,r){return t?t.reduce(e,r):e||null},setDispatch:function(e){o=e},getItems:function(){return[]},add:function(o){if(o&&0!==o.length){var a=[];(o=o.filter(function(e){return e})).forEach(function(r){if(!i.has(r.id)){i.add(r.id),u.push(r),function(e){if(e)if(t)for(var r in e)t.add(r,e[r]);else t=n.getRefCountedReducerManager(n.getReducerManager(e))}(r.reducerMap);var o=r.middlewares;o&&function(r){r&&e.add(r)}(o),a.push(r)}}),a.forEach(function(e){r.forEach(function(r){r.onModuleAdded&&r.onModuleAdded(e)});var t={type:"@@Internal/ModuleManager/ModuleAdded",payload:e.id};d(e.initialActions?[t].concat(e.initialActions):[t])})}},remove:function(n){n&&(n=n.filter(function(e){return e})).forEach(function(n){i.has(n.id)&&(d(n.finalActions),function(e){if(e&&t)for(var r in e)t.remove(r)}(n.reducerMap),function(r){r&&e.remove(r)}(n.middlewares),r.forEach(function(e){e.onModuleRemoved&&e.onModuleRemoved(n)}),i.delete(n.id),u=u.filter(function(e){return e.id!==n.id}),d([{type:"@@Internal/ModuleManager/ModuleRemoved",payload:n.id}]))})},dispose:function(){a.remove(u)}};return a}},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};r.__esModule=!0;var o=t(0),u=t(1);function i(e){return e&&0!==Object.keys(e).length?o.combineReducers(e):function(e,r){return e||null}}r.getRefCountedReducerManager=function(e){var r=u.getStringRefCounter();for(var t in e.getReducerMap())r.add(t);return{reduce:e.reduce,getReducerMap:e.getReducerMap,add:function(t,n){0===r.getCount(t)&&e.add(t,n),r.add(t)},remove:function(t){r.remove(t),0===r.getCount(t)&&e.remove(t)}}},r.getReducerManager=function(e){var r=o.combineReducers(e),t=n({},e),u=[];return{getReducerMap:function(){return t},reduce:function(e,t){if(u.length>0){e=n({},e);for(var o=0,i=u;o<i.length;o++)delete e[i[o]];u=[]}return void 0===e&&(e={}),r(e,t)},add:function(e,n){e&&!t[e]&&(t[e]=n,r=i(t))},remove:function(e){e&&t[e]&&(delete t[e],u.push(e),r=i(t))}}}},function(e,r,t){"use strict";r.__esModule=!0,r.flatten=function(e){if(e){for(var r=e.slice(),t=0;t<r.length;)Array.isArray(r[t])?r.splice.apply(r,[t,1].concat(r[t])):t++;return r}return e}},function(e,r,t){"use strict";r.__esModule=!0,r.getMap=function(e){var r=[],t={};return{keys:r,get:function(n){if(n){var o=r.findIndex(function(r){return r&&e(r,n)});if(-1!==o)return t[o]}},add:function(n,o){n&&-1===r.findIndex(function(r){return r&&e(r,n)})&&(r.push(n),t[r.length-1]=o)},remove:function(n){if(n){var o=r.findIndex(function(r){return r&&e(r,n)});if(-1!==o){delete r[o];var u=t[o];return delete t[o],u}}}}}},function(e,r,t){"use strict";r.__esModule=!0;var n=t(14);r.getMiddlewareManager=function(){var e=n.createDynamicMiddlewares();return{getItems:function(){return[]},enhancer:e.enhancer,add:function(r){return e.addMiddleware.apply(e,r),r},remove:function(r){return r.forEach(e.removeMiddleware),r},dispose:function(){e.resetMiddlewares()}}}},function(e,r,t){"use strict";r.__esModule=!0,r.createDynamicMiddlewares=r.resetMiddlewares=r.removeMiddleware=r.addMiddleware=void 0;var n=t(0),o=function(){var e=[];return{enhancer:function(r){return function(t){return function(o){var u=e.map(function(e){return e(r)});return n.compose.apply(void 0,u)(t)(o)}}},addMiddleware:function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];e=[].concat(e,t)},removeMiddleware:function(r){var t=e.findIndex(function(e){return e===r});-1!==t?e=e.filter(function(e,r){return r!==t}):console.error("Middleware does not exist!",r)},resetMiddlewares:function(){e=[]}}},u=o();r.default=u.enhancer;var i=u.addMiddleware,d=u.removeMiddleware,a=u.resetMiddlewares;r.addMiddleware=i,r.removeMiddleware=d,r.resetMiddlewares=a,r.createDynamicMiddlewares=o}])});
//# sourceMappingURL=redux-dynamic-modules.min.js.map