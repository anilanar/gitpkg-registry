!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("redux"),require("prop-types"),require("react"),require("react-redux")):"function"==typeof define&&define.amd?define(["redux","prop-types","react","react-redux"],t):"object"==typeof exports?exports["redux-dynamic-modules"]=t(require("redux"),require("prop-types"),require("react"),require("react-redux")):e["redux-dynamic-modules"]=t(e.redux,e["prop-types"],e.react,e["react-redux"])}(window,function(e,t,r,n){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,t,r){"use strict";t.__esModule=!0,t.getObjectRefCounter=function(e){e||(e=function(e,t){return e===t});var t=[],r=[];return{getCount:function(n){if(void 0===n||null===n)return 0;var o=t.findIndex(function(t){return t&&e(t,n)});return-1===o?0:r[o]},add:function(n){if(void 0!==n&&null!==n){var o=t.findIndex(function(t){return t&&e(t,n)}),u=1;-1===o?(o=t.length,t.push(n)):u=r[o]+1,r[o]=u}},remove:function(n){var o=t.findIndex(function(t){return t&&e(t,n)});return-1!==o&&(1===r[o]?(delete t[o],delete r[o],!0):(r[o]=r[o]-1,!1))}}},t.getStringRefCounter=function(){var e={};return{getCount:function(t){return void 0===t||null===t?0:e[t]||0},add:function(t){void 0!==t&&null!==t&&(e[t]?e[t]++:e[t]=1)},remove:function(t){return void 0!==t&&null!==t&&!!e[t]&&(1===e[t]?(delete e[t],!0):(e[t]--,!1))}}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}t.__esModule=!0,n(r(4)),n(r(8)),n(r(12)),n(r(1)),n(r(13)),n(r(3))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0;var o=r(1);t.getRefCountedManager=function(e,t){var r=o.getObjectRefCounter(t);e.getItems().forEach(function(e){return r.add(e)});var u=n({},e);return u.add=function(t){if(t){var n=t.filter(function(e){return e}),o=n.filter(function(e){return 0===r.getCount(e)});e.add(o),n.forEach(r.add)}},u.remove=function(t){t&&t.forEach(function(t){t&&(r.remove(t),0===r.getCount(t)&&e.remove([t]))})},u.dispose=function(){e.dispose()},u}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();t.__esModule=!0;var o=r(5),u=r(6),i=r(7),d=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t.prototype.render=function(){var e=this;return i.ReactReduxContext?u.createElement(i.ReactReduxContext.Consumer,null,function(t){return u.createElement(a,{createStore:e.props.createStore,store:t?t.store:void 0,modules:e.props.modules},e.props.children)}):u.createElement(a,{createStore:this.props.createStore,store:this.context.store,modules:this.props.modules},this.props.children)},t.contextTypes={store:o.object},t}(u.Component);t.DynamicModuleLoader=d;var a=function(e){function t(t){var r=e.call(this,t)||this;r._providerInitializationNeeded=!1,r._renderWithReactReduxContext=function(){var e=r.props.store;return u.createElement(i.ReactReduxContext.Provider,{value:{store:e,storeState:e.getState()}},r._renderChildren())},r._renderChildren=function(){return r.props.children&&"function"==typeof r.props.children?r.props.children():r.props.children};var n=t.createStore,o=t.modules,d=t.store;if(r._store=d,r._store)r._getLatestState=i.ReactReduxContext;else{if(!n)throw new Error("Store could not be resolved from React context");r._store=n(),r._providerInitializationNeeded=!0}return r._addedModules=r._store.addModules(o),r}return n(t,e),t.prototype.render=function(){return this._providerInitializationNeeded?u.createElement(i.Provider,{store:this._store},this._renderChildren()):this._getLatestState?(this._getLatestState=!1,this._renderWithReactReduxContext()):this._renderChildren()},t.prototype.componentWillUnmount=function(){this._addedModules&&(this._addedModules.remove(),this._addedModules=void 0)},t}(u.Component)},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),o=r(2),u=r(9),i=r(3),d=r(11);t.createStore=function(e,t,r,a){for(var c=[],f=4;f<arguments.length;f++)c[f-4]=arguments[f];r||(r=[]);var s=r.reduce(function(e,t){return t.middleware&&e.push.apply(e,t.middleware),e},[]),l=i.getRefCountedManager(o.getMiddlewareManager(),function(e,t){return e===t}),p=a.apply(void 0,t.concat([n.applyMiddleware.apply(void 0,s.concat([l.enhancer]))])),v=i.getRefCountedManager(u.getModuleManager(l,r),function(e,t){return e.id===t.id}),h=n.createStore(v.getReducer,e,p);v.setDispatch(h.dispatch);var M=function(e){var t=d.flatten(e);return v.add(t),{remove:function(){v.remove(t)}}},g=function(e){return M([e])};return r.forEach(function(e){e.onModuleManagerCreated&&e.onModuleManagerCreated({addModule:g,addModules:M})}),h.addModule=g,h.addModules=M,h.dispose=function(){v.dispose(),l.dispose(),r.forEach(function(e){e.dispose&&e.dispose()})},h.addModules(c),h}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(10);t.getModuleManager=function(e,t){var r,o=null,u=[],i=new Set,d=function(e){if(e){if(!o)throw new Error("setDispatch should be called on ModuleManager before adding any modules.");e.forEach(o)}},a={getReducer:function(e,t){return r?r.reduce(e,t):e||null},setDispatch:function(e){o=e},getItems:function(){return[]},add:function(o){if(o&&0!==o.length){var a=[];(o=o.filter(function(e){return e})).forEach(function(t){if(!i.has(t.id)){i.add(t.id),u.push(t),function(e){if(e)if(r)for(var t in e)r.add(t,e[t]);else r=n.getRefCountedReducerManager(n.getReducerManager(e))}(t.reducerMap);var o=t.middlewares;o&&function(t){t&&e.add(t)}(o),a.push(t)}}),a.forEach(function(e){t.forEach(function(t){t.onModuleAdded&&t.onModuleAdded(e)});var r={type:"@@Internal/ModuleManager/ModuleAdded",payload:e.id};d(e.initialActions?[r].concat(e.initialActions):[r])})}},remove:function(n){n&&(n=n.filter(function(e){return e})).forEach(function(n){i.has(n.id)&&(d(n.finalActions),function(e){if(e&&r)for(var t in e)r.remove(t)}(n.reducerMap),function(t){t&&e.remove(t)}(n.middlewares),t.forEach(function(e){e.onModuleRemoved&&e.onModuleRemoved(n)}),i.delete(n.id),u=u.filter(function(e){return e.id!==n.id}),d([{type:"@@Internal/ModuleManager/ModuleRemoved",payload:n.id}]))})},dispose:function(){a.remove(u)}};return a}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0;var o=r(0),u=r(1);function i(e){return e&&0!==Object.keys(e).length?o.combineReducers(e):function(e,t){return e||null}}t.getRefCountedReducerManager=function(e){var t=u.getStringRefCounter();for(var r in e.getReducerMap())t.add(r);return{reduce:e.reduce,getReducerMap:e.getReducerMap,add:function(r,n){0===t.getCount(r)&&e.add(r,n),t.add(r)},remove:function(r){t.remove(r),0===t.getCount(r)&&e.remove(r)}}},t.getReducerManager=function(e){var t=o.combineReducers(e),r=n({},e),u=[];return{getReducerMap:function(){return r},reduce:function(e,r){if(u.length>0){e=n({},e);for(var o=0,i=u;o<i.length;o++)delete e[i[o]];u=[]}return void 0===e&&(e={}),t(e,r)},add:function(e,n){e&&!r[e]&&(r[e]=n,t=i(r))},remove:function(e){e&&r[e]&&(delete r[e],u.push(e),t=i(r))}}}},function(e,t,r){"use strict";t.__esModule=!0,t.flatten=function(e){if(e){for(var t=e.slice(),r=0;r<t.length;)Array.isArray(t[r])?t.splice.apply(t,[r,1].concat(t[r])):r++;return t}return e}},function(e,t,r){"use strict";t.__esModule=!0,t.getMap=function(e){var t=[],r={};return{keys:t,get:function(n){if(n){var o=t.findIndex(function(t){return t&&e(t,n)});if(-1!==o)return r[o]}},add:function(n,o){n&&-1===t.findIndex(function(t){return t&&e(t,n)})&&(t.push(n),r[t.length-1]=o)},remove:function(n){if(n){var o=t.findIndex(function(t){return t&&e(t,n)});if(-1!==o){delete t[o];var u=r[o];return delete r[o],u}}}}}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(14);t.getMiddlewareManager=function(){var e=n.createDynamicMiddlewares();return{getItems:function(){return[]},enhancer:e.enhancer,add:function(t){return e.addMiddleware.apply(e,t),t},remove:function(t){return t.forEach(e.removeMiddleware),t},dispose:function(){e.resetMiddlewares()}}}},function(e,t,r){"use strict";t.__esModule=!0,t.createDynamicMiddlewares=t.resetMiddlewares=t.removeMiddleware=t.addMiddleware=void 0;var n=r(0),o=function(){var e=[];return{enhancer:function(t){return function(r){return function(o){var u=e.map(function(e){return e(t)});return n.compose.apply(void 0,u)(r)(o)}}},addMiddleware:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];e=[].concat(e,r)},removeMiddleware:function(t){var r=e.findIndex(function(e){return e===t});-1!==r?e=e.filter(function(e,t){return t!==r}):console.error("Middleware does not exist!",t)},resetMiddlewares:function(){e=[]}}},u=o();t.default=u.enhancer;var i=u.addMiddleware,d=u.removeMiddleware,a=u.resetMiddlewares;t.addMiddleware=i,t.removeMiddleware=d,t.resetMiddlewares=a,t.createDynamicMiddlewares=o}])});
//# sourceMappingURL=redux-dynamic-modules.min.js.map