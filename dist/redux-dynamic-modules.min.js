!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("redux"),require("prop-types"),require("react"),require("react-redux")):"function"==typeof define&&define.amd?define(["redux","prop-types","react","react-redux"],r):"object"==typeof exports?exports["redux-dynamic-modules"]=r(require("redux"),require("prop-types"),require("react"),require("react-redux")):e["redux-dynamic-modules"]=r(e.redux,e["prop-types"],e.react,e["react-redux"])}(window,function(e,r,n,t){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=2)}([function(r,n){r.exports=e},function(e,r,n){"use strict";r.__esModule=!0,r.getObjectRefCounter=function(e){e||(e=function(e,r){return e===r});var r=[],n=[];return{getCount:function(t){if(void 0===t||null===t)return 0;var o=r.findIndex(function(r){return r&&e(r,t)});return-1===o?0:n[o]},add:function(t){if(void 0!==t&&null!==t){var o=r.findIndex(function(r){return r&&e(r,t)}),u=1;-1===o?(o=r.length,r.push(t)):u=n[o]+1,n[o]=u}},remove:function(t){var o=r.findIndex(function(r){return r&&e(r,t)});return-1!==o&&(1===n[o]?(delete r[o],delete n[o],!0):(n[o]=n[o]-1,!1))}}},r.getStringRefCounter=function(){var e={};return{getCount:function(r){return void 0===r||null===r?0:e[r]||0},add:function(r){void 0!==r&&null!==r&&(e[r]?e[r]++:e[r]=1)},remove:function(r){return void 0!==r&&null!==r&&!!e[r]&&(1===e[r]?(delete e[r],!0):(e[r]--,!1))}}}},function(e,r,n){"use strict";function t(e){for(var n in e)r.hasOwnProperty(n)||(r[n]=e[n])}r.__esModule=!0,t(n(4)),t(n(8)),t(n(12)),t(n(1)),t(n(13)),t(n(3))},function(e,r,n){"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};r.__esModule=!0;var o=n(1);r.getRefCountedManager=function(e,r){var n=o.getObjectRefCounter(r);e.getItems().forEach(function(e){return n.add(e)});var u=t({},e);return u.add=function(r){if(r){var t=r.filter(function(e){return e}),o=t.filter(function(e){return 0===n.getCount(e)});e.add(o),t.forEach(n.add)}},u.remove=function(r){r&&r.forEach(function(r){r&&(n.remove(r),0===n.getCount(r)&&e.remove([r]))})},u.dispose=function(){e.dispose()},u}},function(e,r,n){"use strict";var t=this&&this.__extends||function(){var e=function(r,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])})(r,n)};return function(r,n){function t(){this.constructor=r}e(r,n),r.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}}();r.__esModule=!0;var o=n(5),u=n(6),i=n(7),d=function(e){function r(r,n){return e.call(this,r,n)||this}return t(r,e),r.prototype.render=function(){var e=this;return i.ReactReduxContext?u.createElement(i.ReactReduxContext.Consumer,null,function(r){return u.createElement(a,{createStore:e.props.createStore,store:r?r.store:void 0,modules:e.props.modules},e.props.children)}):u.createElement(a,{createStore:this.props.createStore,store:this.context.store,modules:this.props.modules},this.props.children)},r.contextTypes={store:o.object},r}(u.Component);r.DynamicModuleLoader=d;var a=function(e){function r(r){var n=e.call(this,r)||this;n._providerInitializationNeeded=!1,n._renderChildren=function(){return n.props.children&&"function"==typeof n.props.children?n.props.children():n.props.children};var t=r.createStore,o=r.modules,u=r.store;if(n._store=u,!n._store){if(!t)throw new Error("Store could not be resolved from React context");n._store=t(),n._providerInitializationNeeded=!0}return n._addedModules=n._store.addModules(o),n}return t(r,e),r.prototype.render=function(){return this._providerInitializationNeeded?u.createElement(i.Provider,{store:this._store},this._renderChildren()):this._renderChildren()},r.prototype.componentWillUnmount=function(){this._addedModules&&(this._addedModules.remove(),this._addedModules=void 0)},r}(u.Component)},function(e,n){e.exports=r},function(e,r){e.exports=n},function(e,r){e.exports=t},function(e,r,n){"use strict";r.__esModule=!0;var t=n(0),o=n(2),u=n(9),i=n(3),d=n(11);r.createStore=function(e,r,n,a){for(var c=[],f=4;f<arguments.length;f++)c[f-4]=arguments[f];n||(n=[]);var s=n.reduce(function(e,r){return r.middleware&&e.push.apply(e,r.middleware),e},[]),l=i.getRefCountedManager(o.getMiddlewareManager(),function(e,r){return e===r}),p=a.apply(void 0,r.concat([t.applyMiddleware.apply(void 0,s.concat([l.enhancer]))])),v=i.getRefCountedManager(u.getModuleManager(l,n),function(e,r){return e.id===r.id}),M=t.createStore(v.getReducer,e,p);v.setDispatch(M.dispatch);var h=function(e){var r=d.flatten(e);return v.add(r),{remove:function(){v.remove(r)}}},g=function(e){return h([e])};return n.forEach(function(e){e.onModuleManagerCreated&&e.onModuleManagerCreated({addModule:g,addModules:h})}),M.addModule=g,M.addModules=h,M.dispose=function(){v.dispose(),l.dispose(),n.forEach(function(e){e.dispose&&e.dispose()})},M.addModules(c),M}},function(e,r,n){"use strict";r.__esModule=!0;var t=n(10);r.getModuleManager=function(e,r){var n,o=null,u=[],i=new Set,d=function(e){if(e){if(!o)throw new Error("setDispatch should be called on ModuleManager before adding any modules.");e.forEach(o)}},a={getReducer:function(e,r){return n?n.reduce(e,r):e||null},setDispatch:function(e){o=e},getItems:function(){return[]},add:function(o){if(o&&0!==o.length){var a=[];(o=o.filter(function(e){return e})).forEach(function(r){if(!i.has(r.id)){i.add(r.id),u.push(r),function(e){if(e)if(n)for(var r in e)n.add(r,e[r]);else n=t.getRefCountedReducerManager(t.getReducerManager(e))}(r.reducerMap);var o=r.middlewares;o&&function(r){r&&e.add(r)}(o),a.push(r)}}),a.forEach(function(e){r.forEach(function(r){r.onModuleAdded&&r.onModuleAdded(e)});var n={type:"@@Internal/ModuleManager/ModuleAdded",payload:e.id};d(e.initialActions?[n].concat(e.initialActions):[n])})}},remove:function(t){t&&(t=t.filter(function(e){return e})).forEach(function(t){i.has(t.id)&&(d(t.finalActions),function(e){if(e&&n)for(var r in e)n.remove(r)}(t.reducerMap),function(r){r&&e.remove(r)}(t.middlewares),r.forEach(function(e){e.onModuleRemoved&&e.onModuleRemoved(t)}),i.delete(t.id),u=u.filter(function(e){return e.id!==t.id}),d([{type:"@@Internal/ModuleManager/ModuleRemoved",payload:t.id}]))})},dispose:function(){a.remove(u)}};return a}},function(e,r,n){"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};r.__esModule=!0;var o=n(0),u=n(1);function i(e){return e&&0!==Object.keys(e).length?o.combineReducers(e):function(e,r){return e||null}}r.getRefCountedReducerManager=function(e){var r=u.getStringRefCounter();for(var n in e.getReducerMap())r.add(n);return{reduce:e.reduce,getReducerMap:e.getReducerMap,add:function(n,t){0===r.getCount(n)&&e.add(n,t),r.add(n)},remove:function(n){r.remove(n),0===r.getCount(n)&&e.remove(n)}}},r.getReducerManager=function(e){var r=o.combineReducers(e),n=t({},e),u=[];return{getReducerMap:function(){return n},reduce:function(e,n){if(u.length>0){e=t({},e);for(var o=0,i=u;o<i.length;o++)delete e[i[o]];u=[]}return void 0===e&&(e={}),r(e,n)},add:function(e,t){e&&!n[e]&&(n[e]=t,r=i(n))},remove:function(e){e&&n[e]&&(delete n[e],u.push(e),r=i(n))}}}},function(e,r,n){"use strict";r.__esModule=!0,r.flatten=function(e){if(e){for(var r=e.slice(),n=0;n<r.length;)Array.isArray(r[n])?r.splice.apply(r,[n,1].concat(r[n])):n++;return r}return e}},function(e,r,n){"use strict";r.__esModule=!0,r.getMap=function(e){var r=[],n={};return{keys:r,get:function(t){if(t){var o=r.findIndex(function(r){return r&&e(r,t)});if(-1!==o)return n[o]}},add:function(t,o){t&&-1===r.findIndex(function(r){return r&&e(r,t)})&&(r.push(t),n[r.length-1]=o)},remove:function(t){if(t){var o=r.findIndex(function(r){return r&&e(r,t)});if(-1!==o){delete r[o];var u=n[o];return delete n[o],u}}}}}},function(e,r,n){"use strict";r.__esModule=!0;var t=n(14);r.getMiddlewareManager=function(){var e=t.createDynamicMiddlewares();return{getItems:function(){return[]},enhancer:e.enhancer,add:function(r){return e.addMiddleware.apply(e,r),r},remove:function(r){return r.forEach(e.removeMiddleware),r},dispose:function(){e.resetMiddlewares()}}}},function(e,r,n){"use strict";r.__esModule=!0,r.createDynamicMiddlewares=r.resetMiddlewares=r.removeMiddleware=r.addMiddleware=void 0;var t=n(0),o=function(){var e=[];return{enhancer:function(r){return function(n){return function(o){var u=e.map(function(e){return e(r)});return t.compose.apply(void 0,u)(n)(o)}}},addMiddleware:function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];e=[].concat(e,n)},removeMiddleware:function(r){var n=e.findIndex(function(e){return e===r});-1!==n?e=e.filter(function(e,r){return r!==n}):console.error("Middleware does not exist!",r)},resetMiddlewares:function(){e=[]}}},u=o();r.default=u.enhancer;var i=u.addMiddleware,d=u.removeMiddleware,a=u.resetMiddlewares;r.addMiddleware=i,r.removeMiddleware=d,r.resetMiddlewares=a,r.createDynamicMiddlewares=o}])});
//# sourceMappingURL=redux-dynamic-modules.min.js.map